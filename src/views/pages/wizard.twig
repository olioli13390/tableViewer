{% extends "../layout/base.twig" %}

{% block style %}
<link rel="stylesheet" href="/assets/css/settings.css">
<link rel="stylesheet" href="/assets/css/wizard.css">
{% endblock %}

{% block title %}
<title>Wizard</title>
{% endblock %}

{% block main %}
<form id="wizardForm" action="/visualization" method="POST">
    <div class="step.active" id="step1">
        <h2>Étape 1 : Choisissez le type de graphique</h2>
        <select name="chartType" required>
            <option value="bar">Barres</option>
            <option value="line">Lignes</option>
            <option value="pie">Camembert</option>
            <option value="doughnut">Donut</option>
        </select>
        <button type="button" onclick="nextStep()">Suivant</button>
    </div>

    <div class="step" id="step2" >
        <h2>Étape 2 : Sélectionnez les colonnes</h2>
        <p>1ère colonne = Labels / Les suivantes = Données</p>
        {% for header in headers %}
            <label><input type="checkbox" name="columns" value="{{ header }}"> {{ header }}</label><br>
        {% endfor %}
        <button type="button" onclick="prevStep()">Précédent</button>
        <button type="button" onclick="nextStep()">Suivant</button>
    </div>

    <div class="step" id="step3" >
        <h2>Étape 3 : Choisissez une couleur pour les données</h2>
        <input type="color" name="datasetColor" value="#4caf50">
        <button type="button" onclick="prevStep()">Précédent</button>
        <button type="button" onclick="nextStep()">Suivant</button>
    </div>

    <div class="step" id="step4">
        <h2>Étape 4 : Couleur de fond</h2>
        <input type="color" name="backgroundColor" value="#ffffff">
        <button type="button" onclick="prevStep()">Précédent</button>
        <button type="submit">Visualiser</button>
    </div>
</form>

<script>
let currentStep = 1

function showStep(step) {
    document.querySelectorAll(".step").forEach(div => div.style.display = "none")
    document.getElementById("step" + step).style.display = "block"
    currentStep = step
}

function nextStep() {
    if (currentStep < 4) showStep(currentStep + 1)
}

function prevStep() {
    if (currentStep > 1) showStep(currentStep - 1)
}
</script>
{% endblock %}